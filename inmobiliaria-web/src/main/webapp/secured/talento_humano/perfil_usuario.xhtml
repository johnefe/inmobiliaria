<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<f:view>
	<h:head>
		<title>#{proinsaludBean.optionSelectedApp != null ?
			proinsaludBean.optionSelectedApp.name: msg['msg.perfilUsuario']}</title>
	</h:head>
	<h:body>
		<ui:composition template="/layouts/default.xhtml">
			<ui:define name="content">
				<div class="container">
				<h:form id="form1" prependId="false" >
				<p:messages id="messages" showDetail="true" autoUpdate="false" closable="true" globalOnly="true" for="form1" />
				<h:panelGroup id="userProfile">
					<section style="padding-bottom: 50px; padding-top: 50px;">
					<div class="row">
						<div class="col-lg-12 col-sm-12">
							<div class="col-md-3">
								<img src="#{facesContext.externalContext.requestContextPath}/resources/assets/img/user2-160x160.jpg"
									class="img-rounded img-responsive" />
							</div>
							<div class="col-md-9">
								<div class="alert alert-info">
									<h2>Información Usuario</h2>
									<h4>#{employeeBean.person.nameCompleted}</h4>
									<p>Especialista en...</p>
								</div>
							</div>
						</div>

						<div class="col-lg-12 col-md-12">
							<div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
								<div class="btn-group" role="group">
									<button type="button" id="stars" class="btn btn-default" href="#tab1" data-toggle="tab">
										<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
										<div class="hidden-xs">Info</div>
									</button>
								</div>
								<div class="btn-group" role="group">
									<button type="button" id="favorites" class="btn btn-default" href="#tab2" data-toggle="tab">
										<span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
										<div class="hidden-xs">Favorites</div>
									</button>
								</div>
								<div class="btn-group" role="group">
									<button type="button" id="following" class="btn btn-default" href="#tab3" data-toggle="tab">
										<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
										<div class="hidden-xs">Password</div>
									</button>
								</div>
							</div>
							<div class="tab-content col-sm-12" style="padding-top: 20px;">
								<div class="tab-pane fade in active col-sm-12" id="tab1">
									<div class="form-group col-sm-4">
										<label for="username">Username registrado</label>
										<h:inputText type="text" class="form-control" id="username"
											value="#{employeeBean.user.username}" readonly="true" />
									</div>
									<div class="form-group col-sm-4">
										<label for="email">Email registrado </label>
										<h:inputText type="text" class="form-control" id="email"
											value="#{employeeBean.person.email}" readonly="true" />
									</div>
									<div class="form-group col-sm-4">
										<label for="fechaIn">Fecha de ingreso</label>
										<h:inputText type="text" id="fechaIn" class="form-control"
											value="#{employeeBean.employee.fechaIngreso}" readonly="true">
											<f:convertDateTime dateStyle="medium" />
										</h:inputText>
									</div>
									<div class="form-group col-sm-4">
										<label for="area">#{msg['lbl.area']}</label>
										<h:inputText type="text" class="form-control" id="area"
											value="#{employeeBean.employee.area}" readonly="true" />
									</div>
									<div class="form-group col-sm-4">
										<label for="titulo">#{msg['lbl.cargo']}</label>
										<h:inputText type="text" class="form-control" id="cargo"
											value="#{employeeBean.employee.cargo}" readonly="true" />
									</div>
									<div class="form-group col-sm-4">
										<label for="movil">Celular</label>
										<h:inputText type="text" class="form-control" id="movil"
											value="#{employeeBean.person.movil}" readonly="true" />
									</div>
								</div>
								<div class="tab-pane fade in" id="tab2">
									<p:dataGrid var="pag"
										value="#{proinsaludBean.optionFavoriteList}" columns="3"
										layout="grid" rows="12" id="lista">
										<f:facet name="header">#{msg['lbl.pageFavoritas']}</f:facet>
										<p:panel>
											<h:panelGrid columns="2" style="width:100%">
												<a
													href="#{facesContext.externalContext.requestContextPath}/secured#{proinsaludBean.getCompleteUrl(pag.userOption.option)}">#{pag.userOption.option.name}</a>
												<p:commandLink title="#{msg['lbl.eliminarPagina']}"
													action="#{proinsaludBean.deleteFavorite(pag)}"
													onstart="PF('statusDialog').show();"
													onsuccess="PF('statusDialog').hide();"
													update="@([id$=lista])">
													<h:outputText styleClass="ui-icon ui-icon-trash"
														style="margin:0 auto;" />
												</p:commandLink>
											</h:panelGrid>
										</p:panel>
									</p:dataGrid>
								</div>
								<div class="tab-pane fade in form-group col-sm-12" id="tab3">
									<p:outputPanel id="pnl1">
									<h:form id="form11" prependId="false" >
										<p:messages id="messages2" showDetail="true" autoUpdate="false" closable="true" for="form11" />
										<div class="col-lg-12 col-md-12">
											<div class="form-group">
												<div class="form-group col-lg-4 col-xs-12">
													<label for="passwordA" class="col-sm-12 control-label required">Digite su contraseña actual</label> 
													<h:inputSecret autocomplete="off" id="passwordA" validatorMessage="#{msg.passwordValidatorMsg}" required="true"
														styleClass="form-control" value="#{employeeBean.currentPassword}" requiredMessage="#{msg['obligatoryField']}">
													</h:inputSecret>
													<p:message for="passwordA" id="passwordMsgA" />
												</div>
												<div class="form-group col-sm-4">
													<label for="password1" class="col-sm-12 control-label required">Digite su nueva contraseña</label> 
													<h:inputSecret redisplay="false" autocomplete="off" id="password1" validatorMessage="#{msg.passwordValidatorMsg}" required="true"
														styleClass="form-control" value="#{employeeBean.newPassword}" requiredMessage="#{msg['obligatoryField']}">
														<f:ajax event="blur" render="passwordMsg1" />
														<f:validateRegex for="password1" pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])([a-zA-Z0-9]{5,20})$" />
													</h:inputSecret>
													<p:message for="password1" id="passwordMsg1" />
												</div>
												<div class="form-group col-sm-4">
													<label for="password2" class="col-sm-12 control-label required">Confirme su contraseña</label> 
													<h:inputSecret autocomplete="off" id="password2" validatorMessage="#{msg.passwordValidatorMsg}" required="true"
														styleClass="form-control" value="#{employeeBean.passConfirm}" requiredMessage="#{msg['obligatoryField']}">
														<f:ajax event="blur" render="passwordMsg2" />
														<f:validateRegex for="passwordMsg2" pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])([a-zA-Z0-9]{5,20})$" />
													</h:inputSecret>
													<p:message for="password2" id="passwordMsg2" />
												</div>
											</div>
										</div>
										<div class="clearfix"></div>
										<div class="col-lg-12 col-md-12">
											<div class="col-lg-4 col-md-8">
												<div class="form-group col-lg-offset-12 col-xs-12">
													<p:commandButton process="@form" title="GUARDAR" action="#{employeeBean.saveNewPassword()}" update="pnl1, messages2" onstart="showSpinner();" onsuccess="hideSpinner();"
															class="btn btn-success form-control"/>
												</div>
											</div>
										</div>
									</h:form>
									</p:outputPanel>
								</div>
							</div>
						</div>
					</div>
					</section>
					</h:panelGroup>
					</h:form>
				</div>

			</ui:define>
		</ui:composition>
	</h:body>
</f:view>
</html>