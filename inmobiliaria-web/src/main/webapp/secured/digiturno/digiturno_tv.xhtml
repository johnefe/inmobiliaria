<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui">
<f:view>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
	
	<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/proinsalud.css" />
	<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/font-awesome.min.css" />
	<link rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/digiturno.css" />

	<h:head>
		<title>#{msg['msg.tituloPrincipal']}</title>
	</h:head>
	<h:body class="body">

		<h:form prependId="false" id="form1">

			<p:outputPanel id="pnlGeneral">

				<p:outputPanel id="pnlSub" rendered="#{digitalTurnTvBean.moduleUser == null}">
					
					<div class="col-lg-12 col-sm-12 col-xs-12 text-center list-point">
						<div class="row">
							<div class="col-lg-offset-2 col-lg-8 col-sm-12">
								<table class="table table-bordered ">
									<thead>
										<tr class="" style="background: #7986CB; color: #fff; font-size: 20px;">
											<th class="text-center">SEDE</th>
											<th class="text-center">TIPO</th>
											<th class="text-center">PUNTO</th>
											<th></th>
										</tr>
									</thead>
									<tbody>
										<ui:repeat var="moduloPunto" value="#{digitalTurnTvBean.modulesUser}">
											<tr style="background: #9FA8DA; color: #fff; font-size: 20px;">
												<td>#{moduloPunto.module.point.sede.nameSede}</td>
												<td>#{moduloPunto.module.typeModule}</td>
												<td>#{moduloPunto.module.point.name}</td>
												<td style="width: 5%;">
													<p:commandButton process="@this" action="#{digitalTurnTvBean.loadForm(moduloPunto)}" title="#{msg['lbl.ver']}" styleClass="btn-ic-little" icon="ic-btn-little ic-btn-view btn-table" update="@([id$=pnlGeneral])" />
												</td>
											</tr>
										</ui:repeat>
									</tbody>
								</table>
							</div>
						</div>
					</div>

				</p:outputPanel>

				<p:outputPanel id="pnlTv" rendered="#{digitalTurnTvBean.moduleUser != null}">
					<p:poll interval="1" listener="#{digitalTurnTvBean.updateDate()}"></p:poll>
					<p:outputPanel id="pnlTvTurnosLlamando">
						<nav class=" fixed-top navbar-expand-lg fixed-top titulo-digiturno"> 
							<div class="row">
								<ui:repeat var="turno" value="#{digitalTurnTvBean.turnosLlamando }">
									<div class="col-lg-#{digitalTurnTvBean.sizeDivLlamando} text-center titulo-item">
										<h4 class="titulo-tv">
											
											<strong class="codigo-turno" id="strong">#{turno.code}</strong><br/>
											AL
											<strong class="codigo-turno" id="strong">#{turno.digitalTurn.moduleUser.module.nameModule}</strong>
										</h4>
									</div>
								</ui:repeat>
							</div>
						</nav>
					</p:outputPanel> 

					<div class="col-lg-12 col-sm-12 col-xs-12 text-center" style="height: auto; width: 100%; margin: 7px;">
						<div class="row">
							<div class="col-lg-12 form-group">

								<div class="col-lg-4">
									<div class="col-lg-12 text-center cabecera-lista-turno">

										<div class="row">
											<div class="col-lg-5">
												<h3>TURNO</h3>
											</div>
											<div class="col-lg-7">
												<h3>MÓDULO</h3>
											</div>
										</div>

									</div>
									<p:outputPanel id="pnlTvTurnosAtencion">
										<div class="col-lg-12 text-center " name="content" id="content">
											<ui:repeat var="turno" value="#{digitalTurnTvBean.turnosEnAtencion}">
												<div class="row turno ">
													<div class="col-lg-5">
														<h4>#{turno.code}</h4>
													</div>
													<div class="col-lg-7">
														<h4>#{turno.digitalTurn.moduleUser.module.nameModule}</h4>
													</div>
												</div>
											</ui:repeat>
										</div>
									</p:outputPanel>
								</div>

								<div class="col-lg-8 bg-slider">
									<div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="6000">
										<!-- Wrapper for slides -->
										<div class="carousel-inner" role="listbox">
											<ui:repeat var="diapositivaSlider" value="#{digitalTurnSliderBean.sliders}" varStatus="status">
												<div class="item #{status.index == 0 ? ' active': ''}">
													<img style="height: 100%; width: 100%;" class="img-responsive" src="#{facesContext.externalContext.requestContextPath}/resources/assets/img/#{diapositivaSlider.urlImage}" />
													<div class="carousel-caption">
														<h3>#{diapositivaSlider.titleSlider}</h3>
														<p>#{diapositivaSlider.contentSlider}</p>
													</div>
												</div>
											</ui:repeat>
										</div>

										<!-- Controls -->
										<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
											<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
											<span class="sr-only">Anterior</span>
										</a>
										<a id="btnNextSlider" class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
											<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
											<span class="sr-only">Siguiente</span>
										</a>
									</div>
								</div>

							</div>
						</div>
					</div>
					
					<footer class="footer">
					<div class="col-lg-12 text-center ">
						<div class="col-lg-10">
							<!-- <h2 class="titulo-bienvenida">BIENVENIDOS A PROINSALUD S.A</h2> -->
							<div class="row">
								<p:outputPanel id="pnlTvTurnosAtendidos">
									<ui:repeat var="turno" value="#{digitalTurnTvBean.turnosAtendidos }">
										<div class="col-lg-#{digitalTurnTvBean.sizeDivAtendidos} text-center footer-item">
											<strong class="codigo-turno" id="strong">#{turno.code}</strong><br/>			
											<strong>ATENDIDO</strong>
										</div>
									</ui:repeat>
								</p:outputPanel>
							</div>
						</div>
						<div class="col-lg-2 text-center reloj ">
						
							<p:clock pattern="hh:mm:ss a">
								
							</p:clock><p/>
							<p:clock pattern=" dd-MMMM-yyyy" mode="server" timeZone="GMT-5">
								<f:convertDateTime locale="es_CO" timeZone="America/Bogota" dateStyle="short" type="date" pattern="dd/MM/yyyy - h:mm:ss a" />
							</p:clock>
						

						</div>
					</div>
					</footer>

					<script>
					setTimeout(function() {
						$("#btnNextSlider").click();
					}, 6000);
						
					</script>

				</p:outputPanel>

			</p:outputPanel>
		</h:form>


		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/primeface_es_CO.js"></script>
		<script src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/bootstrap.min.js" />
		<!-- jQuery 3 -->
		<script src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/jquery.min.js"></script>
		<script>
				$.noConflict();
			</script>
	</h:body>
</f:view>
</html>