<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<f:view>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta
		content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
		name="viewport" />
	<link rel="stylesheet"
		href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/bootstrapp.min.css" />
	<link rel="stylesheet"
		href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/proinsalud.css" />
	<link rel="stylesheet"
		href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/font-awesome.min.css" />
	<!-- Ionicons -->
	<link rel="stylesheet"
		href="#{facesContext.externalContext.requestContextPath}/resources/assets/css/ionicons.min.css" />
	
	<h:head>
		<title>#{msg['msg.tituloPrincipal']}</title>
	</h:head>
	<h:body style="background: #FAFAFA;">
		<p:outputPanel id="pnlGeneral">
			<h:form id="formSelectModule" prependId="false">
				<h:panelGroup id="pnlSelectModule">
					<p:outputPanel id="pnlModulo"
						rendered="#{digitalTurnBean.moduleUser eq null}">

						<section class="container py-5">
						<div class="col-lg-12 col-sm-12 col-xs-12 text-center py-5">
							<div class="row py-5">
								<div class="col-lg-8 offset-2 py-5">
									<table class="table table-bordered ">
										<thead>
											<tr class=""
												style="background: #7986CB; color: #fff; font-size: 20px;">
												<th class="text-center">SEDE</th>
												<th class="text-center">TIPO MODULO</th>
												<th class="text-center">NOMBRE MODULO</th>
												<th class="text-center">PUNTO</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<ui:repeat var="moduloPunto"
												value="#{digitalTurnBean.moduleUserList}">
												<tr
													style="background: #9FA8DA; color: #fff; font-size: 20px;">
													<td>#{moduloPunto.module.point.sede.nameSede}</td>
													<td>#{moduloPunto.module.typeModule}</td>
													<td>#{moduloPunto.module.nameModule}</td>
													<td>#{moduloPunto.module.point.name}</td>
													<td><p:commandButton process="@this"
															action="#{digitalTurnBean.loadServicesByPoint(moduloPunto)}"
															title="#{msg['lbl.ver']}" styleClass="btn-ic-little"
															icon="ic-btn-little ic-btn-view btn-table"
															update="pnlGeneral, identification" /></td>
												</tr>
											</ui:repeat>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						</section>
					</p:outputPanel>
				</h:panelGroup>
			</h:form>

			<h:panelGroup id="identification"
				rendered="#{digitalTurnBean.showForm eq false and digitalTurnBean.moduleUser ne null}">
				<div class="container py-5">
					<h:form prependId="false" id="registerId">
						<h:panelGroup>
							<div class="col-lg-12 col-sm-12 col-xs-12 text-center">
								<div class="row">
									<div class="col-lg-12">
										<h1>DIGITURNO PROINSALUD</h1>
									</div>
									<div class="col-lg-12 form-group py-5">
										<h3>Bienvenidos</h3>
										<h3>Digite su número de identificación para obtener un turno.</h3>
									</div>
									<div class="col-lg-12 form-group py-2">
										<div class="row">
											<div class="col-lg-6">
												<div class="col-lg-12 col-sm-12 col-xs-12">
													<div class="input-group input-group-lg">
														<h:inputText type="text" autocomplete="off" onkeypress="return onlyNumbersWithEnter(event);" pt:placeholder="Número de identificación"
															class="form-control" id="cedula"  required="true" requiredMessage="#{msg['obligatoryField']}" value="#{digitalTurnBean.identificationPerson}" style="font-size: 40px;" />
													</div>
												</div>
												<div class="col-lg-12 py-3 col-sm-12 col-xs-12">
													<p:commandButton process="@form" title="INGRESAR" action="#{digitalTurnBean.searchPerson()}" update="pnlGeneral, priority, menu"
														class="btn btn-success form-control" style="font-size: 40px;" />
												</div>
											</div>
											<div class="col-lg-6">
												<div class="row">
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero7()"
															class="btn btn-lg btn-outline-success form-control">7</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero8()"
															class="btn btn-lg btn-outline-success form-control">8</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero9()"
															class="btn btn-lg btn-outline-success form-control">9</button>
													</div>
												</div>
												<div class="row">
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero4()"
															class="btn btn-lg btn-outline-success form-control">4</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero5()"
															class="btn btn-lg btn-outline-success form-control">5</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero6()"
															class="btn btn-lg btn-outline-success form-control">6</button>
													</div>
												</div>
												<div class="row">
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero1()"
															class="btn btn-lg btn-outline-success form-control">1</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero2()"
															class="btn btn-lg btn-outline-success form-control">2</button>
													</div>
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero3()"
															class="btn btn-lg btn-outline-success form-control">3</button>
													</div>
												</div>
												<div class="row">
													<div class="col-lg-4 col-sm-4 col-4 form-group">
														<button type="button" onclick="numero0()"
															class="btn btn-lg btn-outline-success form-control">0</button>
													</div>
													<div class="col-lg-8 col-sm-8 col-8 form-group">
														<button type="button" onclick="borrar()"
															class="btn btn-lg btn-outline-danger form-control">BORRAR</button>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</h:form>
				</div>
			</h:panelGroup>
			<h:panelGroup id="priority" rendered="#{digitalTurnBean.showForm eq true and digitalTurnBean.priorityTurn eq null}">
				<div class="container py-5">
					<h:form prependId="false" id="formPriority">
						<h:panelGroup>
							<div class="col-lg-12 col-sm-12 col-xs-12 text-center">
								<div class="row">
									<div class="col-lg-2">
										<p:commandButton process="@form" action="#{digitalTurnBean.back()}" styleClass="btn btn-info" icon="fa fa-chevron-circle-left" update="pnlGeneral,identification,menu,submenu" />
									</div>
									<div class="col-lg-8">
										<h1>Prioridades</h1>
									</div>
									<div class="col-lg-2"></div>
									<div class="col-lg-12">
										<span class="label label-primary">#{digitalTurnBean.mensaje}</span>
									</div>
									<div class="col-lg-12 form-group py-5">
										<div class="row">
											<ui:repeat var="n" value="#{digitalTurnBean.priorityListTemp}">
												<div class="col-lg-4 col-sm-12 col-xs-12 form-group">
													<p:commandButton process="@form" title="#{n.namePriorityTurn}" action="#{digitalTurnBean.savePriority(n)}"
														update="pnlGeneral, identification, priority, menu, submenu" class="btn btn-lg btn-outline-info form-control" style="min-width: 200px; min-height: 100px; font-size: 32px;" />
												</div>
											</ui:repeat>
										</div>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</h:form>
				</div>
			</h:panelGroup>
			<h:panelGroup id="menu" rendered="#{digitalTurnBean.priorityTurn ne null and digitalTurnBean.selectedService1 eq null}">
				<div class="container py-5">
					<h:form prependId="false" id="formMenu">
						<h:panelGroup>
							<div class="col-lg-12 col-sm-12 col-xs-12 text-center">
								<div class="row">
									<div class="col-lg-2">
										<p:commandButton process="@form" action="#{digitalTurnBean.back()}" styleClass="btn-ic" icon="ic-btn ic-btn-save" update="pnlGeneral,identification,menu,submenu"/>
									</div>
									<div class="col-lg-8">
										<h1>MENU OPCIONES</h1>
									</div>
									<div class="col-lg-2"></div>
									<div class="col-lg-12">
										<span class="label label-primary">#{digitalTurnBean.mensaje}</span>
									</div>
									<div class="col-lg-12 form-group py-5">
										<div class="row">
											<ui:repeat var="n" value="#{digitalTurnBean.loadPointServicesFather()}">
												<div class="col-lg-4 col-sm-12 col-xs-12 form-group">
													<p:commandButton process="@form" title="#{n.service.nameService}" action="#{digitalTurnBean.loadSelectedService(n)}" 
														update="pnlGeneral, identification, menu, submenu, formSubMenu" class="btn btn-lg btn-outline-info form-control" style="min-width: 200px; min-height: 100px; font-size: 36px;" />
												</div>
											</ui:repeat>
										</div>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</h:form>
				</div>
			</h:panelGroup>
			<h:panelGroup id="submenu" rendered="#{digitalTurnBean.selectedService1 ne null and digitalTurnBean.showResult eq false}">
				<div class="container py-5">
					<h:form prependId="false" id="formSubMenu">
						<h:panelGroup>
							<div class="col-lg-12 col-sm-12 col-xs-12 text-center">
								<div class="row">
									<div class="col-lg-2">
										<p:commandButton process="@form" action="#{digitalTurnBean.back()}" styleClass="btn-ic" icon="ic-btn ic-btn-save" update="pnlGeneral,identification,menu,submenu"/>
									</div>
									<div class="col-lg-8">
										<h1>#{digitalTurnBean.selectedService1.nameService}</h1>
									</div>
									<div class="col-lg-2"></div>
									<div class="col-lg-12">
										<span class="label label-default">#{digitalTurnBean.mensaje}</span>
									</div>
									<div class="col-lg-12 form-group py-5">
										<div class="row">
											<ui:repeat var="n" value="#{digitalTurnBean.pointServicesTemp}">
												<div class="col-lg-4 col-sm-12 col-xs-12 form-group">
													<p:commandButton onclick="setValue()" process="@form" title="#{n.service.nameService}" action="#{digitalTurnBean.printDigitalTurn(n)}"
														update="pnlGeneral, menu, submenu,ticket" class="btn btn-lg btn-outline-info form-control" style="min-width: 200px; min-height: 100px; font-size: 36px;" />
												</div>
											</ui:repeat>
										</div>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</h:form>
				</div>
			</h:panelGroup>
			<h:panelGroup id="ticket" rendered="#{digitalTurnBean.showResult eq true}">
				<div class="container py-5">
					<h:form prependId="false" id="formPrintTicket">
						<h:panelGroup>
							<div class="col-lg-12 col-sm-12 col-xs-12 text-center">
								<div class="card text-center offset-1" style="width: 80%;">
									<div class="card-header success-color white-text">
										PROINSALUD</div>
									<div class="card-body">
										<h4 class="card-title">BIENVENIDOS</h4>
										<div class="form-group col-md-12">
											<label for="txt_firstName" class="control-label">SERVICIO </label>
											<h:outputText value=" #{digitalTurnBean.digitalTurn.pointService.service.nameService}" />
										</div>
										<div class="form-group col-md-12">
											<h2>#{digitalTurnBean.digitalTurn.codeTurn}</h2>
										</div>
										<div class="form-group col-md-4 offset-sm-4 col-xs-12">
											<p:commandButton process="@form" title="IMPRIMIR TICKET" action="#{digitalTurnBean.printTicket()}" update="pnlGeneral, priority, menu"
											class="btn btn-success form-control"/>
										</div>
									</div>
									<div class="card-footer text-muted success-color white-text">
										<h:outputText value="#{digitalTurnBean.digitalTurn.hourTurn}" >
											<f:convertDateTime dateStyle="medium" type="date" pattern="dd-MM-yyyy hh:mm:ss" />
										</h:outputText>
									</div>
								</div>
							</div>
						</h:panelGroup>
					</h:form>
				</div>
			</h:panelGroup>
		</p:outputPanel>
<!-- 		<script src="http://code.jquery.com/jquery-3.3.1.js"></script> -->
<!-- 		<script>$.noConflict()</script> -->
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/proinsalud.js"></script>
		<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/assets/js/numeros.js"></script>
	</h:body>
</f:view>
</html>