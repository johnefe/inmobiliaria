<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<title>Proveedores</title>
	</h:head>
	<h:body>
		<ui:composition template="/layouts/default.xhtml">
			<ui:define name="content">
				<div class="col-sm-12">
					<div class="box">

						<div class="box-head">
							<label class="title-head">#{msg['lbl.proveedores']}</label>
						</div>

						<h:form id="formListaProvedores" prependId="false">
							<h:panelGroup rendered="#{proveedoresBean.provider eq null}">
								<p:messages id="messages" showDetail="true" autoUpdate="false" closable="true" globalOnly="true" for="form1" />
								<div class="box-body">

									<div class="col-sm-12">
										<label class="subtitle-head">#{msg['lbl.listadoProveedores']}</label>
										<div class="div-btn-header">
											<p:commandButton title="#{msg['lbl.nuevo']}" action="#{proveedoresBean.nuevo()}" rendered="#{proveedoresBean.provider eq null}" styleClass="btn-ic" icon="ic-btn ic-btn-new" update=":formListaProvedores :formRegistroProveedor" process="@this" />
										</div>
									</div>

									<div class="clearfix" />

									<div class="col-sm-12">
										<p:outputPanel id="tablaregistros">
											<div class="panel-body form-table">
												<p:dataTable id="tblProveedores" widgetVar="table1" var="pro" value="#{proveedoresBean.providerList}" paginatorAlwaysVisible="false" paginatorPosition="bottom" rows="10" paginator="true"
													paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" emptyMessage="No se encontraron registros" rowsPerPageTemplate="5,10,15">
													<p:column style="width:300px;" headerText="Nombre Proveedor" sortBy="#{pro.name}" priority="1" filterBy="#{person.firstName}" filterMatchMode="contains">
														<h:outputText style="text-transform: capitalize" value="#{pro.name}" />
													</p:column>
													<p:column style="width:200px;" headerText="#{msg['lbl.direccion']}" priority="2" filterBy="#{pro.address}" filterMatchMode="contains">
														<h:outputText value="#{pro.address}" />
													</p:column>
													<p:column style="width:100px;" priority="3" headerText="Telefono">
														<h:outputText value="#{pro.phone}" />
													</p:column>
													<p:column style="width:200px;" priority="4" headerText="Email">
														<h:outputText value="#{pro.email}" />
													</p:column>
													<p:column style="width:75px">
														<table style="border: transparent;">
															<tbody>
																<tr>
																	<td>
																		<p:commandButton process="@this" action="#{proveedoresBean.loadProvider(pro.id)}" update=":formListaProvedores :formRegistroProveedor" title="#{msg['lbl.editar']}" styleClass="btn-ic-little" icon="ic-btn-little ic-btn-edit" onstart="showSpinner();" onsuccess="hideSpinner();" />
																	</td>
																</tr>
															</tbody>
														</table>
													</p:column>
												</p:dataTable>
											</div>
										</p:outputPanel>
									</div>
								</div>
							</h:panelGroup>
						</h:form>
						<h:form prependId="false" id="formRegistroProveedor">
							<p:messages id="messages_formRe" showDetail="true" autoUpdate="false" closable="true" globalOnly="true" for="formRegistroProveedor" />
							<h:panelGroup rendered="#{proveedoresBean.provider ne null}">
								<div class="box-body">

									<div class="col-sm-12">
										<label class="subtitle-head">#{proveedoresBean.provider.id eq null ? 'Registrar' : 'Editar'}</label>
									</div>

									<div class="clearfix"></div>


									<div class="col-md-3 col-xs-12 form-group">
										<label for="nombre" class="col-sm-12 control-label required">Nombre Proveedor</label>
										<div class="col-sm-12">
											<h:inputText autocomplete="off" type="text" class="form-control" id="nombre" value="#{proveedoresBean.provider.name}" required="true" requiredMessage="#{msg['obligatoryField']}">
												<p:ajax event="blur" update="msg_txt_name"></p:ajax>
											</h:inputText>
											<p:watermark for="nombre" value="#{msg['lbl.nombre']}" />
											<p:message for="nombre" id="msg_txt_name" />
										</div>
									</div>


									<div class="col-md-3 col-xs-12 form-group">
										<label for="direccion" class="col-sm-12 control-label">Dirección</label>
										<div class="col-sm-12">
											<h:inputText type="text" class="form-control" id="direccion" value="#{proveedoresBean.provider.address}" />
											<p:watermark for="direccion" value="#{msg['lbl.direccion']}" />
										</div>
									</div>

									<div class="col-md-3 col-xs-12 form-group">
										<label for="telefono" class="col-sm-12 control-label">Telefono</label>
										<div class="col-sm-12">
											<h:inputText type="text" class="form-control" id="telefono" value="#{proveedoresBean.provider.phone}" />
											<p:watermark for="telefono" value="#{msg['lbl.telefono']}" />
										</div>
									</div>

									<div class="col-md-3 col-xs-12 form-group">
										<label for="email" class="col-sm-12 control-label">Email</label>
										<div class="col-sm-12">
											<h:inputText type="text" class="form-control" id="email" value="#{proveedoresBean.provider.email}" />
											<p:watermark for="email" value="#{msg['lbl.email']}" />
										</div>
									</div>

									<div class="clearfix"></div>

									<div class="col-md-3 col-xs-12 form-group">
										<label for="nit" class="col-sm-12 control-label requerid">Nit</label>
										<div class="col-sm-12">
											<h:inputText type="text" class="form-control" id="nit" placeholder="Nit" value="#{proveedoresBean.provider.nit}" />
											<p:watermark for="nit" value="#{msg['lbl.nit']}" />
										</div>
									</div>

									<div class="clearfix"></div>

									<div class="col-sm-12">
										<div class="div-btn">
											<p:commandButton title="#{msg['lbl.guardar']}" process="@form" action="#{proveedoresBean.saveProvider()}" styleClass="btn-ic" icon="ic-btn ic-btn-save" update=":formListaProvedores :formRegistroProveedor" onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" />
											<p:commandButton title="#{msg['lbl.cancelar']}" process="@this" styleClass="btn-ic" icon="ic-btn ic-btn-cancel" action="#{proveedoresBean.cancel()}" update=":formListaProvedores :formRegistroProveedor">
												<p:resetInput target="formRegistroProveedor" />
											</p:commandButton>
										</div>
									</div>

								</div>
							</h:panelGroup>
						</h:form>
					</div>
				</div>
			</ui:define>
		</ui:composition>
	</h:body>
</f:view>
</html>
